{
  "version": 3,
  "sources": ["../src/main.ts"],
  "sourcesContent": ["/*\n * Created with @iobroker/create-adapter v2.6.5\n */\n\n// The adapter-core module gives you access to the core ioBroker functions\n// you need to create an adapter\nimport * as utils from '@iobroker/adapter-core';\nimport _ from 'lodash';\n\n// Load your modules here, e.g.:\nimport { ApiEndpoints, OmvApi } from './lib/omv-rpc.js';\nimport { HwInfo } from './lib/types-hwInfo.js';\nimport * as tree from './lib/tree/index.js'\nimport * as myHelper from './lib/helper.js';\nimport * as myI18n from './lib/i18n.js';\nimport { myCommonChannelArray, myCommonState, myCommoneChannelObject } from './lib/myTypes.js';\nimport { Disk } from './lib/types-disk.js';\n\nclass Openmediavault extends utils.Adapter {\n\tomvApi: OmvApi | undefined = undefined;\n\n\tsubscribedList: string[] = [];\n\n\tpublic constructor(options: Partial<utils.AdapterOptions> = {}) {\n\t\tsuper({\n\t\t\t...options,\n\t\t\tname: 'openmediavault',\n\t\t\tuseFormatDate: true\n\t\t});\n\t\tthis.on('ready', this.onReady.bind(this));\n\t\tthis.on('stateChange', this.onStateChange.bind(this));\n\t\t// this.on('objectChange', this.onObjectChange.bind(this));\n\t\tthis.on('message', this.onMessage.bind(this));\n\t\tthis.on('unload', this.onUnload.bind(this));\n\t}\n\n\t//#region adapter methods\n\n\t/**\n\t * Is called when databases are connected and adapter received configuration.\n\t */\n\tprivate async onReady(): Promise<void> {\n\n\t\t// ohne worte....\n\t\tawait myI18n.init(`${utils.getAbsoluteDefaultDataDir().replace('iobroker-data/', '')}node_modules/iobroker.${this.name}/admin`, this);\n\n\t\tthis.omvApi = new OmvApi(this);\n\n\t\tawait this.updateData(true);\n\n\t\t// // Initialize your adapter here\n\n\t\t// // The adapters config (in the instance object everything under the attribute \"native\") is accessible via\n\t\t// // this.config:\n\t\t// this.log.info('config option1: ' + this.config.option1);\n\t\t// this.log.info('config option2: ' + this.config.option2);\n\n\t\t// /*\n\t\t// For every state in the system there has to be also an object of type state\n\t\t// Here a simple template for a boolean variable named \"testVariable\"\n\t\t// Because every adapter instance uses its own unique namespace variable names can't collide with other adapters variables\n\t\t// */\n\t\t// await this.setObjectNotExistsAsync('testVariable', {\n\t\t// \ttype: 'state',\n\t\t// \tcommon: {\n\t\t// \t\tname: 'testVariable',\n\t\t// \t\ttype: 'boolean',\n\t\t// \t\trole: 'indicator',\n\t\t// \t\tread: true,\n\t\t// \t\twrite: true,\n\t\t// \t},\n\t\t// \tnative: {},\n\t\t// });\n\n\t\t// // In order to get state updates, you need to subscribe to them. The following line adds a subscription for our variable we have created above.\n\t\t// this.subscribeStates('testVariable');\n\t\t// // You can also add a subscription for multiple states. The following line watches all states starting with \"lights.\"\n\t\t// // this.subscribeStates('lights.*');\n\t\t// // Or, if you really must, you can also watch all states. Don't do this if you don't need to. Otherwise this will cause a lot of unnecessary load on the system:\n\t\t// // this.subscribeStates('*');\n\n\t\t// /*\n\t\t// \tsetState examples\n\t\t// \tyou will notice that each setState will cause the stateChange event to fire (because of above subscribeStates cmd)\n\t\t// */\n\t\t// // the variable testVariable is set to true as command (ack=false)\n\t\t// await this.setStateAsync('testVariable', true);\n\n\t\t// // same thing, but the value is flagged \"ack\"\n\t\t// // ack should be always set to true if the value is received from or acknowledged from the target system\n\t\t// await this.setStateAsync('testVariable', { val: true, ack: true });\n\n\t\t// // same thing, but the state is deleted after 30s (getState will return null afterwards)\n\t\t// await this.setStateAsync('testVariable', { val: true, ack: true, expire: 30 });\n\n\t\t// examples for the checkPassword/checkGroup functions\n\t\t// let result = await this.checkPasswordAsync('admin', 'iobroker');\n\t\t// this.log.info('check user admin pw iobroker: ' + result);\n\n\t\t// result = await this.checkGroupAsync('admin', 'admin');\n\t\t// this.log.info('check group user admin group admin: ' + result);\n\n\n\t}\n\n\t/**\n\t * Is called when adapter shuts down - callback has to be called under any circumstances!\n\t */\n\tprivate async onUnload(callback: () => void): Promise<void> {\n\t\ttry {\n\t\t\t// Here you must clear all timeouts or intervals that may still be active\n\t\t\t// clearTimeout(timeout1);\n\t\t\t// clearTimeout(timeout2);\n\t\t\t// ...\n\t\t\t// clearInterval(interval1);\n\n\t\t\tawait this.omvApi?.logout();\n\n\t\t\tcallback();\n\t\t} catch (e) {\n\t\t\tcallback();\n\t\t}\n\t}\n\n\t// If you need to react to object changes, uncomment the following block and the corresponding line in the constructor.\n\t// You also need to subscribe to the objects with `this.subscribeObjects`, similar to `this.subscribeStates`.\n\t// /**\n\t//  * Is called if a subscribed object changes\n\t//  */\n\t// private onObjectChange(id: string, obj: ioBroker.Object | null | undefined): void {\n\t// \tif (obj) {\n\t// \t\t// The object was changed\n\t// \t\tthis.log.info(`object ${id} changed: ${JSON.stringify(obj)}`);\n\t// \t} else {\n\t// \t\t// The object was deleted\n\t// \t\tthis.log.info(`object ${id} deleted`);\n\t// \t}\n\t// }\n\n\t/**\n\t * Is called if a subscribed state changes\n\t */\n\tprivate onStateChange(id: string, state: ioBroker.State | null | undefined): void {\n\t\tif (state) {\n\t\t\t// The state was changed\n\t\t\tthis.log.info(`state ${id} changed: ${state.val} (ack = ${state.ack})`);\n\t\t} else {\n\t\t\t// The state was deleted\n\t\t\tthis.log.info(`state ${id} deleted`);\n\t\t}\n\t}\n\n\t/**\n\t * Some message was sent to this instance over message box. Used by email, pushover, text2speech, ...\n\t * Using this method requires \"common.messagebox\" property to be set to true in io-package.json\n\t */\n\tprivate async onMessage(obj: ioBroker.Message): Promise<void> {\n\t\tconst logPrefix = '[onMessage]:';\n\n\t\ttry {\n\t\t\tif (typeof obj === 'object') {\n\t\t\t\tif (obj.command.endsWith('StateList')) {\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\tconst states = tree[obj.command.replace('StateList', '')].getStateIDs();\n\t\t\t\t\tlet list = [];\n\n\t\t\t\t\tif (states) {\n\t\t\t\t\t\tfor (let i = 0; i <= states.length - 1; i++) {\n\n\t\t\t\t\t\t\tif (states[i + 1] && states[i] === myHelper.getIdWithoutLastPart(states[i + 1])) {\n\t\t\t\t\t\t\t\tlist.push({\n\t\t\t\t\t\t\t\t\tlabel: `[Channel]\\t ${states[i]}`,\n\t\t\t\t\t\t\t\t\tvalue: states[i],\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlist.push({\n\t\t\t\t\t\t\t\t\tlabel: `[State]\\t\\t ${states[i]}`,\n\t\t\t\t\t\t\t\t\tvalue: states[i],\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlist = _.orderBy(list, ['value'], ['asc']);\n\n\t\t\t\t\tif (obj.callback) this.sendTo(obj.from, obj.command, list, obj.callback);\n\t\t\t\t}\n\t\t\t}\n\n\t\t} catch (error: any) {\n\t\t\tthis.log.error(`${logPrefix} error: ${error}, stack: ${error.stack}`);\n\t\t}\n\t}\n\n\t//#endregion\n\n\t//#region updateData\n\n\tprivate async updateData(isAdapterStart: boolean = false) {\n\t\tconst logPrefix = '[updateData]:';\n\n\t\ttry {\n\n\t\t\tif (this.omvApi) {\n\t\t\t\tif (!this.omvApi.isConnected) {\n\t\t\t\t\tawait this.omvApi.login();\n\t\t\t\t}\n\n\t\t\t\tawait this.updateDataGeneric(ApiEndpoints.hwInfo, tree.hwInfo, 'hardware info', undefined, undefined, this.config.hwInfoEnabled, isAdapterStart, this.config.hwInfoStatesIsWhiteList, this.config.hwInfoStatesBlackList);\n\t\t\t\tawait this.updateDataGeneric(ApiEndpoints.disk, tree.disk, 'disk info', 'devicename', 'devicename', this.config.diskEnabled, isAdapterStart, this.config.diskStatesIsWhiteList, this.config.diskStatesBlackList);\n\t\t\t\tawait this.updateDataGeneric(ApiEndpoints.smart, tree.smart, 'smart info', 'uuid', 'devicename', this.config.smartEnabled, isAdapterStart, this.config.smartStatesIsWhiteList, this.config.smartStatesBlackList);\n\t\t\t\tawait this.updateDataGeneric(ApiEndpoints.fileSystem, tree.fileSystem, 'file system info', 'uuid', 'comment', this.config.fileSystemEnabled, isAdapterStart, this.config.fileSystemStatesIsWhiteList, this.config.fileSystemStatesBlackList);\n\n\t\t\t\t//@ts-ignore\n\t\t\t\tthis.log.warn(JSON.stringify(this.config['diskStatesBlackList']));\n\t\t\t}\n\n\t\t} catch (error: any) {\n\t\t\tthis.log.error(`${logPrefix} error: ${error}, stack: ${error.stack}`);\n\t\t}\n\t}\n\n\t/**\n\t * \n\t * @param endpoint \n\t * @param treeType \n\t * @param channelName \n\t * @param propertyDeviceId property to be used as id of device\n\t * @param deviceName property to be used as name of device\n\t * @param configEnabled \n\t * @param isAdapterStart \n\t */\n\n\tprivate async updateDataGeneric(endpoint: ApiEndpoints, treeType: any, channelName: string, propertyDeviceId: string | undefined, deviceName: string | undefined, configEnabled: boolean, isAdapterStart: boolean = false, statesIsWhiteList: boolean = false, blacklist: { id: string }[] = []) {\n\t\tconst logPrefix = `[updateDataGeneric]: [${endpoint}]: `;\n\n\t\ttry {\n\t\t\tif (this.connected && this.omvApi?.isConnected) {\n\t\t\t\tif (configEnabled) {\n\t\t\t\t\tif (isAdapterStart) {\n\t\t\t\t\t\tawait this.createOrUpdateChannel(treeType.idChannel, channelName, undefined, true);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst data: any = await this.omvApi.retrievData(endpoint);\n\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tif (Array.isArray(data)) {\n\t\t\t\t\t\t\tfor (let device of data) {\n\t\t\t\t\t\t\t\tif (propertyDeviceId && device[propertyDeviceId]) {\n\t\t\t\t\t\t\t\t\tconst idDevice = `${treeType.idChannel}.${device[propertyDeviceId]}`;\n\n\t\t\t\t\t\t\t\t\tawait this.createOrUpdateDevice(idDevice, deviceName && device[deviceName] ? device[deviceName] : 'unknown', undefined, undefined, undefined, isAdapterStart, true);\n\t\t\t\t\t\t\t\t\tawait this.createOrUpdateGenericState(idDevice, treeType.get(), device, blacklist, statesIsWhiteList, device, device, isAdapterStart);\n\n\t\t\t\t\t\t\t\t\tthis.log.debug(`${logPrefix} device '${device[propertyDeviceId]}' data successfully updated`);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.log.error(`${logPrefix} deviceName property '${propertyDeviceId}' not exists in device`);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tawait this.createOrUpdateGenericState(treeType.idChannel, treeType.get(), data, blacklist, statesIsWhiteList, data, data, isAdapterStart);\n\n\t\t\t\t\t\t\tthis.log.debug(`${logPrefix} channel '${channelName}' data successfully updated`);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (isAdapterStart) {\n\t\t\t\t\t\t\tthis.log.info(`${logPrefix} data successfully updated`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (await this.objectExists(treeType.idChannel)) {\n\t\t\t\t\t\tawait this.delObjectAsync(treeType.idChannel, { recursive: true });\n\t\t\t\t\t\tthis.log.debug(`${logPrefix} '${treeType.idChannel}' deleted`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t} catch (error: any) {\n\t\t\tthis.log.error(`${logPrefix} error: ${error}, stack: ${error.stack}`);\n\t\t}\n\t}\n\n\t/**\n\t * create or update a channel object, update will only be done on adapter start\n\t * @param id \n\t * @param name \n\t * @param onlineId \n\t * @param icon \n\t * @param isAdapterStart\n\t */\n\tprivate async createOrUpdateChannel(id: string, name: string, icon: string | undefined = undefined, isAdapterStart: boolean = false): Promise<void> {\n\t\tconst logPrefix = '[createOrUpdateChannel]:';\n\n\t\ttry {\n\t\t\tconst i18n = name ? myI18n.getTranslatedObject(name) : name;\n\n\t\t\tlet common = {\n\t\t\t\tname: name && Object.keys(i18n).length > 1 ? i18n : name,\n\t\t\t\ticon: icon\n\t\t\t};\n\n\t\t\tif (!await this.objectExists(id)) {\n\t\t\t\tthis.log.debug(`${logPrefix} creating channel '${id}'`);\n\t\t\t\tawait this.setObjectAsync(id, {\n\t\t\t\t\ttype: 'channel',\n\t\t\t\t\tcommon: common,\n\t\t\t\t\tnative: {}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (isAdapterStart) {\n\t\t\t\t\tconst obj = await this.getObjectAsync(id);\n\n\t\t\t\t\tif (obj && obj.common) {\n\t\t\t\t\t\tif (!myHelper.isChannelCommonEqual(obj.common as ioBroker.ChannelCommon, common)) {\n\t\t\t\t\t\t\tawait this.extendObject(id, { common: common });\n\n\t\t\t\t\t\t\tlet diff = myHelper.deepDiffBetweenObjects(common, obj.common, this);\n\t\t\t\t\t\t\tif (diff && diff.icon) diff.icon = _.truncate(diff.icon);\t// reduce base64 image string for logging\n\n\t\t\t\t\t\t\tthis.log.debug(`${logPrefix} channel updated '${id}' (updated properties: ${JSON.stringify(diff)})`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error: any) {\n\t\t\tthis.log.error(`${logPrefix} error: ${error}, stack: ${error.stack}`);\n\t\t}\n\t}\n\n\t/**\n\t* create or update a device object, update will only be done on adapter start\n\t* @param id \n\t* @param name \n\t* @param onlineId \n\t* @param icon \n\t* @param isAdapterStart\n\t*/\n\tprivate async createOrUpdateDevice(id: string, name: string | undefined, onlineId: string | undefined, errorId: string | undefined = undefined, icon: string | undefined = undefined, isAdapterStart: boolean = false, logChanges: boolean = true): Promise<void> {\n\t\tconst logPrefix = '[createOrUpdateDevice]:';\n\n\t\ttry {\n\t\t\tconst i18n: any = name ? myI18n.getTranslatedObject(name) : name;\n\n\t\t\tlet common: any = {\n\t\t\t\tname: name && Object.keys(i18n).length > 1 ? i18n : name,\n\t\t\t\ticon: icon\n\t\t\t};\n\n\t\t\tif (onlineId) {\n\t\t\t\tcommon['statusStates'] = {\n\t\t\t\t\tonlineId: onlineId\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (errorId) {\n\t\t\t\tcommon['statusStates']['errorId'] = errorId;\n\t\t\t}\n\n\t\t\tif (!await this.objectExists(id)) {\n\t\t\t\tthis.log.debug(`${logPrefix} creating device '${id}'`);\n\t\t\t\tawait this.setObject(id, {\n\t\t\t\t\ttype: 'device',\n\t\t\t\t\tcommon: common,\n\t\t\t\t\tnative: {}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (isAdapterStart) {\n\t\t\t\t\tconst obj = await this.getObjectAsync(id);\n\n\t\t\t\t\tif (obj && obj.common) {\n\t\t\t\t\t\tif (!myHelper.isDeviceCommonEqual(obj.common as ioBroker.ChannelCommon, common)) {\n\t\t\t\t\t\t\tawait this.extendObject(id, { common: common });\n\n\t\t\t\t\t\t\tlet diff = myHelper.deepDiffBetweenObjects(common, obj.common, this);\n\t\t\t\t\t\t\tif (diff && diff.icon) diff.icon = _.truncate(diff.icon);\t// reduce base64 image string for logging\n\n\t\t\t\t\t\t\tthis.log.debug(`${logPrefix} device updated '${id}' ${logChanges ? `(updated properties: ${JSON.stringify(diff)})` : ''}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error: any) {\n\t\t\tthis.log.error(`${logPrefix} error: ${error}, stack: ${error.stack}`);\n\t\t}\n\t}\n\n\tasync createOrUpdateGenericState(channel: string, treeDefinition: any, objValues: any, blacklistFilter: { id: string }[], isWhiteList: boolean, objDevices: any, objChannel: any, isAdapterStart: boolean = false, filterId = '', isChannelOnWhitelist: boolean = false) {\n\t\tconst logPrefix = '[createOrUpdateGenericState]:';\n\n\t\ttry {\n\t\t\tif (this.connected && this.omvApi?.isConnected) {\n\t\t\t\tfor (const key in treeDefinition) {\n\t\t\t\t\tlet logMsgState = `${channel}.${key}`.split('.')?.slice(1)?.join('.');\n\n\t\t\t\t\tlet logDetails = `${(objDevices as any)?.mac ? `mac: ${(objDevices as any)?.mac}` : (objDevices as any)?.ip ? `ip: ${(objDevices as any)?.ip}` : (objDevices as any)?._id ? `id: ${(objDevices as any)?._id}` : ''}`\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// if we have an own defined state which takes val from other property\n\t\t\t\t\t\tconst valKey = Object.hasOwn(objValues, treeDefinition[key].valFromProperty) && treeDefinition[key].valFromProperty ? treeDefinition[key].valFromProperty : key\n\n\t\t\t\t\t\tconst cond1 = (Object.hasOwn(objValues, valKey) && objValues[valKey] !== undefined) || (Object.hasOwn(treeDefinition[key], 'id') && !Object.hasOwn(treeDefinition[key], 'valFromProperty'));\n\t\t\t\t\t\tconst cond2 = Object.hasOwn(treeDefinition[key], 'iobType') && !Object.hasOwn(treeDefinition[key], 'object') && !Object.hasOwn(treeDefinition[key], 'array');\n\t\t\t\t\t\tconst cond3 = (Object.hasOwn(treeDefinition[key], 'conditionToCreateState') && treeDefinition[key].conditionToCreateState(objChannel, this) === true) || !Object.hasOwn(treeDefinition[key], 'conditionToCreateState');\n\n\t\t\t\t\t\t// if (channel === 'devices.f4:e2:c6:55:55:e2' && (key === 'satisfaction' || valKey === 'satisfaction')) {\n\t\t\t\t\t\t// \tthis.log.warn(`cond 1: ${cond1}`);\n\t\t\t\t\t\t// \tthis.log.warn(`cond 2: ${cond2}`);\n\t\t\t\t\t\t// \tthis.log.warn(`cond 3: ${cond3}`)\n\t\t\t\t\t\t// \tthis.log.warn(`val: ${objValues[valKey]}`);\n\t\t\t\t\t\t// }\n\n\t\t\t\t\t\tif (key && cond1 && cond2 && cond3) {\n\t\t\t\t\t\t\t// if we have a 'iobType' property, then it's a state\n\t\t\t\t\t\t\tlet stateId = key;\n\n\t\t\t\t\t\t\tif (Object.hasOwn(treeDefinition[key], 'id')) {\n\t\t\t\t\t\t\t\t// if we have a custom state, use defined id\n\t\t\t\t\t\t\t\tstateId = treeDefinition[key].id;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlogMsgState = `${channel}.${stateId}`.split('.')?.slice(1)?.join('.');\n\n\t\t\t\t\t\t\tif ((!isWhiteList && !_.some(blacklistFilter, { id: `${filterId}${stateId}` })) || (isWhiteList && _.some(blacklistFilter, { id: `${filterId}${stateId}` })) || isChannelOnWhitelist || Object.hasOwn(treeDefinition[key], 'required')) {\n\t\t\t\t\t\t\t\tif (!await this.objectExists(`${channel}.${stateId}`)) {\n\t\t\t\t\t\t\t\t\t// create State\n\t\t\t\t\t\t\t\t\tthis.log.silly(`${logPrefix} ${objDevices?.name} - creating state '${logMsgState}'`);\n\t\t\t\t\t\t\t\t\tconst obj = {\n\t\t\t\t\t\t\t\t\t\ttype: 'state',\n\t\t\t\t\t\t\t\t\t\tcommon: await this.getCommonGenericState(key, (treeDefinition as { [key: string]: myCommonState }), objDevices, logMsgState),\n\t\t\t\t\t\t\t\t\t\tnative: {}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\tawait this.setObjectAsync(`${channel}.${stateId}`, obj);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t// update State if needed (only on adapter start)\n\t\t\t\t\t\t\t\t\tif (isAdapterStart) {\n\t\t\t\t\t\t\t\t\t\tconst obj = await this.getObjectAsync(`${channel}.${stateId}`);\n\n\t\t\t\t\t\t\t\t\t\tconst commonUpdated = await this.getCommonGenericState(key, (treeDefinition as { [key: string]: myCommonState }), objDevices, logMsgState);\n\n\t\t\t\t\t\t\t\t\t\tif (obj && obj.common) {\n\t\t\t\t\t\t\t\t\t\t\tif (!myHelper.isStateCommonEqual(obj.common as ioBroker.StateCommon, commonUpdated)) {\n\t\t\t\t\t\t\t\t\t\t\t\tawait this.extendObject(`${channel}.${stateId}`, { common: commonUpdated });\n\t\t\t\t\t\t\t\t\t\t\t\tthis.log.debug(`${logPrefix} ${objDevices?.name} - updated common properties of state '${logMsgState}' (updated properties: ${JSON.stringify(myHelper.deepDiffBetweenObjects(commonUpdated, obj.common, this))})`);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (!this.subscribedList.includes(`${channel}.${stateId}`) && ((treeDefinition[key].write && treeDefinition[key].write === true) || Object.hasOwn(treeDefinition[key], 'subscribeMe'))) {\n\t\t\t\t\t\t\t\t\t// state is writeable or has subscribeMe Property -> subscribe it\n\t\t\t\t\t\t\t\t\tthis.log.silly(`${logPrefix} ${objDevices?.name} - subscribing state '${logMsgState}'`);\n\t\t\t\t\t\t\t\t\tawait this.subscribeStatesAsync(`${channel}.${stateId}`);\n\n\t\t\t\t\t\t\t\t\tthis.subscribedList.push(`${channel}.${stateId}`);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (objValues && (Object.hasOwn(objValues, key) || (Object.hasOwn(objValues, treeDefinition[key].valFromProperty)))) {\n\t\t\t\t\t\t\t\t\tconst val = treeDefinition[key].readVal ? await treeDefinition[key].readVal(objValues[valKey], this, objDevices, `${channel}.${stateId}`) : objValues[valKey];\n\n\t\t\t\t\t\t\t\t\tlet changedObj: any = undefined\n\n\t\t\t\t\t\t\t\t\tif (key === 'last_seen' || key === 'first_seen' || key === 'rundate') {\n\t\t\t\t\t\t\t\t\t\t// set lc to last_seen value\n\t\t\t\t\t\t\t\t\t\tchangedObj = await this.setStateChangedAsync(`${channel}.${stateId}`, { val: val, lc: val * 1000 }, true);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tchangedObj = await this.setStateChangedAsync(`${channel}.${stateId}`, val, true);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (!isAdapterStart && changedObj && Object.hasOwn(changedObj, 'notChanged') && !changedObj.notChanged) {\n\t\t\t\t\t\t\t\t\t\tthis.log.silly(`${logPrefix} value of state '${logMsgState}' changed to ${val}`);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (!Object.hasOwn(treeDefinition[key], 'id')) {\n\t\t\t\t\t\t\t\t\t\t// only report it if it's not a custom defined state\n\t\t\t\t\t\t\t\t\t\tthis.log.debug(`${logPrefix} ${objDevices?.name} - property '${logMsgState}' not exists in bootstrap values (sometimes this option may first need to be activated / used in the Unifi Network application or will update by an event)`);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// channel is on blacklist\n\t\t\t\t\t\t\t\t// delete also at runtime, because some properties are only available on websocket data\n\t\t\t\t\t\t\t\tif (await this.objectExists(`${channel}.${stateId}`)) {\n\t\t\t\t\t\t\t\t\tawait this.delObjectAsync(`${channel}.${stateId}`);\n\n\t\t\t\t\t\t\t\t\tthis.log.info(`${logPrefix} '${objDevices?.name}' ${logDetails ? `(${logDetails}) ` : ''}state '${channel}.${stateId}' delete, ${isWhiteList ? 'it\\'s not on the whitelist' : 'it\\'s on the blacklist'}`);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// it's a channel from type object\n\t\t\t\t\t\t\tif (Object.hasOwn(treeDefinition[key], 'object') && Object.hasOwn(objValues, key)) {\n\t\t\t\t\t\t\t\tconst idChannelAppendix = Object.hasOwn(treeDefinition[key], 'idChannel') ? treeDefinition[key].idChannel : key\n\t\t\t\t\t\t\t\tconst idChannel = `${channel}.${idChannelAppendix}`;\n\n\t\t\t\t\t\t\t\tif ((!isWhiteList && !_.some(blacklistFilter, { id: `${filterId}${idChannelAppendix}` })) || (isWhiteList && _.some(blacklistFilter, (x) => x.id.startsWith(`${filterId}${idChannelAppendix}`))) || Object.hasOwn(treeDefinition[key], 'required')) {\n\t\t\t\t\t\t\t\t\tawait this.createOrUpdateChannel(`${idChannel}`, Object.hasOwn(treeDefinition[key], 'channelName') ? treeDefinition[key].channelName(objDevices, objChannel, this) : key, Object.hasOwn(treeDefinition[key], 'icon') ? treeDefinition[key].icon : undefined, true);\n\t\t\t\t\t\t\t\t\tawait this.createOrUpdateGenericState(`${idChannel}`, treeDefinition[key].object, objValues[key], blacklistFilter, isWhiteList, objDevices, objChannel[key], isAdapterStart, `${filterId}${idChannelAppendix}.`, isWhiteList && _.some(blacklistFilter, { id: `${filterId}${idChannelAppendix}` }));\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t// channel is on blacklist\n\t\t\t\t\t\t\t\t\tif (await this.objectExists(idChannel)) {\n\t\t\t\t\t\t\t\t\t\tawait this.delObjectAsync(idChannel, { recursive: true });\n\t\t\t\t\t\t\t\t\t\tthis.log.info(`${logPrefix} '${objDevices?.name}' ${logDetails ? `(${logDetails}) ` : ''}channel '${idChannel}' delete, ${isWhiteList ? 'it\\'s not on the whitelist' : 'it\\'s on the blacklist'}`);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// it's a channel from type array\n\t\t\t\t\t\t\tif (Object.hasOwn(treeDefinition[key], 'array') && Object.hasOwn(objValues, key)) {\n\n\t\t\t\t\t\t\t\tif (objValues[key] !== null && objValues[key].length > 0) {\n\t\t\t\t\t\t\t\t\tconst idChannelAppendix = Object.hasOwn(treeDefinition[key], 'idChannel') ? treeDefinition[key].idChannel : key\n\t\t\t\t\t\t\t\t\tconst idChannel = `${channel}.${idChannelAppendix}`;\n\n\t\t\t\t\t\t\t\t\tif ((!isWhiteList && !_.some(blacklistFilter, { id: `${filterId}${idChannelAppendix}` })) || (isWhiteList && _.some(blacklistFilter, (x) => x.id.startsWith(`${filterId}${idChannelAppendix}`))) || Object.hasOwn(treeDefinition[key], 'required')) {\n\t\t\t\t\t\t\t\t\t\tawait this.createOrUpdateChannel(`${idChannel}`, Object.hasOwn(treeDefinition[key], 'channelName') ? treeDefinition[key].channelName(objDevices, objChannel, this) : key, Object.hasOwn(treeDefinition[key], 'icon') ? treeDefinition[key].icon : undefined, isAdapterStart);\n\n\t\t\t\t\t\t\t\t\t\tconst arrayNumberAdd = Object.hasOwn(treeDefinition[key], 'arrayStartNumber') ? treeDefinition[key].arrayStartNumber : 0\n\n\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i <= objValues[key].length - 1; i++) {\n\t\t\t\t\t\t\t\t\t\t\tlet nr = i + arrayNumberAdd;\n\n\t\t\t\t\t\t\t\t\t\t\tif (objValues[key][i] !== null && objValues[key][i] !== undefined) {\n\t\t\t\t\t\t\t\t\t\t\t\tlet idChannelArray: string | undefined = myHelper.zeroPad(nr, treeDefinition[key].arrayChannelIdZeroPad || 0);\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (Object.hasOwn(treeDefinition[key], 'arrayChannelIdFromProperty')) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tidChannelArray = treeDefinition[key].arrayChannelIdFromProperty(objChannel[key][i], i, this);\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (Object.hasOwn(treeDefinition[key], 'arrayChannelIdPrefix')) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tidChannelArray = treeDefinition[key].arrayChannelIdPrefix + myHelper.zeroPad(nr, treeDefinition[key].arrayChannelIdZeroPad || 0);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (idChannelArray !== undefined) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tawait this.createOrUpdateChannel(`${idChannel}.${idChannelArray}`, Object.hasOwn(treeDefinition[key], 'arrayChannelNameFromProperty') ? treeDefinition[key].arrayChannelNameFromProperty(objChannel[key][i], this) : treeDefinition[key].arrayChannelNamePrefix + nr || nr.toString(), undefined, true)\n\t\t\t\t\t\t\t\t\t\t\t\t\tawait this.createOrUpdateGenericState(`${idChannel}.${idChannelArray}`, treeDefinition[key].array, objValues[key][i], blacklistFilter, isWhiteList, objDevices, objChannel[key][i], true, `${filterId}${idChannelAppendix}.`, isWhiteList && _.some(blacklistFilter, { id: `${filterId}${idChannelAppendix}` }));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// channel is on blacklist, wlan is comming from realtime api\n\t\t\t\t\t\t\t\t\t\tif (await this.objectExists(idChannel)) {\n\t\t\t\t\t\t\t\t\t\t\tawait this.delObjectAsync(idChannel, { recursive: true });\n\t\t\t\t\t\t\t\t\t\t\tthis.log.info(`${logPrefix} '${objDevices?.name}' ${logDetails ? `(${logDetails}) ` : ''}channel '${idChannel}' delete, ${isWhiteList ? 'it\\'s not on the whitelist' : 'it\\'s on the blacklist'}`);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (error: any) {\n\t\t\t\t\t\tthis.log.error(`${logPrefix} [id: ${key}, ${logDetails ? `${logDetails}, ` : ''}key: ${key}] error: ${error}, stack: ${error.stack}, data: ${JSON.stringify(objValues[key])}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error: any) {\n\t\t\tthis.log.error(`${logPrefix} error: ${error}, stack: ${error.stack}`);\n\t\t}\n\t}\n\n\tasync getCommonGenericState(id: string, treeDefinition: { [key: string]: myCommonState }, objDevices: any, logMsgState: string) {\n\t\tconst logPrefix = '[getCommonGenericState]:';\n\n\t\ttry {\n\t\t\t// i18x translation if exists\n\t\t\tconst i18n = myI18n.getTranslatedObject(treeDefinition[id].name || id);\n\t\t\tconst name = Object.keys(i18n).length > 1 ? i18n : (treeDefinition[id].name || id);\n\n\t\t\tconst common: any = {\n\t\t\t\tname: name,\n\t\t\t\ttype: treeDefinition[id].iobType,\n\t\t\t\tread: (treeDefinition[id].read !== undefined) ? treeDefinition[id].read : true,\n\t\t\t\twrite: (treeDefinition[id].write !== undefined) ? treeDefinition[id].write : false,\n\t\t\t\trole: treeDefinition[id].role ? treeDefinition[id].role : 'state',\n\t\t\t};\n\n\t\t\tif (treeDefinition[id].unit) common.unit = treeDefinition[id].unit;\n\n\t\t\tif (treeDefinition[id].min || treeDefinition[id].min === 0) common.min = treeDefinition[id].min;\n\n\t\t\tif (treeDefinition[id].max || treeDefinition[id].max === 0) common.max = treeDefinition[id].max;\n\n\t\t\tif (treeDefinition[id].step) common.step = treeDefinition[id].step;\n\n\t\t\tif (treeDefinition[id].expert) common.expert = treeDefinition[id].expert;\n\n\t\t\tif (treeDefinition[id].def || treeDefinition[id].def === 0 || treeDefinition[id].def === false) common.def = treeDefinition[id].def;\n\n\t\t\tif (treeDefinition[id].states) {\n\t\t\t\tcommon.states = treeDefinition[id].states;\n\t\t\t} else if (Object.hasOwn(treeDefinition[id], 'statesFromProperty')) {\n\t\t\t\tconst statesFromProp = myHelper.getAllowedCommonStates(treeDefinition[id].statesFromProperty, objDevices);\n\n\t\t\t\tcommon.states = statesFromProp;\n\t\t\t\tthis.log.debug(`${logPrefix} ${objDevices?.name} - set allowed common.states for '${logMsgState}' (from: ${treeDefinition[id].statesFromProperty})`);\n\t\t\t}\n\n\t\t\tif (treeDefinition[id].desc) common.desc = treeDefinition[id].desc;\n\n\t\t\treturn common;\n\t\t} catch (error: any) {\n\t\t\tthis.log.error(`${logPrefix} error: ${error}, stack: ${error.stack}`);\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\t//#endregion\n}\n\nif (require.main !== module) {\n\t// Export the constructor in compact mode\n\tmodule.exports = (options: Partial<utils.AdapterOptions> | undefined) => new Openmediavault(options);\n} else {\n\t// otherwise start the instance directly\n\t(() => new Openmediavault())();\n}"],
  "mappings": "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",
  "names": ["_"]
}
